# מדריך בדיקות - Logcat Viewer

## סקירה כללית
מסמך זה מפרט את כל התכונות שיש לבדוק באפליקציה.

## 1. בדיקת עיצוב LTR

### מה לבדוק:
- סדר העמודות צריך להיות משמאל לימין:
  ```
  Timestamp → PID/TID → Level → Tag → Message
  ```

### איך לבדוק:
1. הפעל את האפליקציה
2. התחבר למכשיר והתחל לקבל לוגים
3. ודא שהעמודות מסודרות כמצופה
4. ודא שהטקסט באנגלית מוצג בצורה טבעית (משמאל לימין)

### תוצאה מצופה:
✅ כל העמודות מסודרות LTR
✅ הטקסט קריא ונראה טבעי

---

## 2. בדיקת בחירה בודדת

### מה לבדוק:
- לחיצה על שורה בודדת

### איך לבדוק:
1. לחץ על שורת לוג אחת
2. השורה צריכה להיות מסומנת בכחול כהה (#1E3A5F)
3. לחץ על שורה אחרת (ללא Ctrl)
4. רק השורה החדשה צריכה להיות מסומנת

### תוצאה מצופה:
✅ שורה אחת בלבד מסומנת בכל פעם
✅ הצבע משתנה לכחול כהה

---

## 3. בדיקת בחירה מרובה עם Ctrl

### מה לבדוק:
- בחירת מספר שורות עם Ctrl

### איך לבדוק:
1. לחץ על שורה ראשונה (היא תסומן)
2. החזק Ctrl ולחץ על שורה שנייה
3. שתי השורות צריכות להיות מסומנות
4. החזק Ctrl ולחץ על שורה שלישית
5. שלוש השורות צריכות להיות מסומנות
6. החזק Ctrl ולחץ על אחת השורות המסומנות
7. הסימון שלה צריך להתבטל (toggle)

### תוצאה מצופה:
✅ ניתן לבחור מספר שורות עם Ctrl
✅ לחיצה חוזרת עם Ctrl מבטלת את הבחירה
✅ כל השורות המסומנות בצבע כחול

---

## 4. בדיקת בחירה בגרירה

### מה לבדוק:
- בחירת טווח שורות בגרירת עכבר

### איך לבדוק:
1. לחץ על שורה ראשונה (ללא Ctrl)
2. **החזק את כפתור העכבר לחוץ**
3. גרור את העכבר למעלה או למטה על שורות נוספות
4. כל השורות בטווח צריכות להיות מסומנות בזמן אמת
5. שחרר את כפתור העכבר
6. הבחירה צריכה להישאר

### תוצאה מצופה:
✅ גרירה בוחרת טווח רציף של שורות
✅ הבחירה מתעדכנת בזמן אמת במהלך הגרירה
✅ הבחירה נשארת אחרי שחרור העכבר

### דוגמה:
```
לחיצה על שורה 5 → גרירה לשורה 10 = שורות 5-10 מסומנות
לחיצה על שורה 10 → גרירה לשורה 5 = שורות 5-10 מסומנות
```

---

## 5. בדיקת תפריט הקשר - שורה בודדת

### מה לבדוק:
- תפריט על שורה לא מסומנת

### איך לבדוק:
1. לחץ לחיצה ימנית על שורה שאינה מסומנת
2. צריך להופיע תפריט עם 2 אפשרויות:
   - "העתק הודעה"
   - "העתק שורה מלאה"
3. בחר "העתק הודעה"
4. הדבק (Ctrl+V) בעורך טקסט
5. צריך להופיע רק תוכן ההודעה

### תוצאה מצופה:
✅ תפריט מופיע על שורה לא מסומנת
✅ "העתק הודעה" מעתיק רק את ההודעה
✅ "העתק שורה מלאה" מעתיק את כל הפרטים

### דוגמה להעתקה מלאה:
```
12-25 10:30:45.123 1234/5678 I/MainActivity: Application started
```

---

## 6. בדיקת תפריט הקשר - שורות מרובות

### מה לבדוק:
- תפריט על שורות מסומנות

### איך לבדוק:
1. בחר מספר שורות (עם Ctrl או גרירה)
2. לחץ לחיצה ימנית על אחת השורות המסומנות
3. צריך להופיע תפריט עם 2 אפשרויות:
   - "העתק X שורות" (X = מספר השורות)
   - "בטל בחירה"
4. בחר "העתק X שורות"
5. הדבק בעורך טקסט
6. צריכות להופיע כל השורות המסומנות, מופרדות בשורות חדשות

### תוצאה מצופה:
✅ תפריט מופיע רק על שורות מסומנות
✅ מספר השורות מוצג נכון
✅ כל השורות מועתקות בפורמט מלא
✅ השורות מסודרות לפי סדר המופע (מהראשונה לאחרונה)

### דוגמה:
בחירת שורות 5, 7, 3 → העתקה תיתן:
```
[שורה 3]
[שורה 5]
[שורה 7]
```

---

## 7. בדיקת ביטול בחירה

### מה לבדוק:
- ביטול בחירה מתפריט ההקשר

### איך לבדוק:
1. בחר מספר שורות
2. לחץ לחיצה ימנית
3. בחר "בטל בחירה"
4. כל הסימונים צריכים להיעלם

### תוצאה מצופה:
✅ כל השורות חוזרות למצב רגיל
✅ אין שורות מסומנות

---

## 8. בדיקת אינדיקציות חזותיות

### מה לבדוק:
- צבעי רקע משתנים

### איך לבדוק:
1. העבר עכבר מעל שורה (ללא לחיצה)
   - צריך להיות רקע אפור בהיר (#2D2D2D)
2. לחץ על שורה
   - צריך להיות רקע כחול כהה (#1E3A5F)
3. הוצא את העכבר מהשורה המסומנת
   - צריך להישאר כחול
4. העבר עכבר מעל שורה מסומנת
   - צריך להישאר כחול (לא משתנה ל-hover)

### תוצאה מצופה:
✅ Hover: אפור בהיר
✅ Selected: כחול כהה
✅ Selected + Hover: כחול כהה (לא משתנה)

---

## 9. בדיקת שילובים מורכבים

### תרחיש 1: Ctrl + גרירה
1. בחר שורה עם Ctrl
2. נסה לגרור
3. **תוצאה**: לא צריך לקרות כלום (Ctrl מבטל גרירה)

### תרחיש 2: גרירה + Ctrl
1. התחל גרירה (בחר טווח)
2. שחרר
3. החזק Ctrl ולחץ על שורה נוספת
4. **תוצאה**: השורה הנוספת מתווספת לבחירה

### תרחיש 3: לחיצה ימנית על שורה לא מסומנת כשיש בחירה
1. בחר מספר שורות
2. לחץ ימני על שורה אחרת (לא מסומנת)
3. **תוצאה**: תפריט של שורה בודדת (לא מרובה)

### תרחיש 4: לחיצה ימנית על שורה מסומנת
1. בחר מספר שורות
2. לחץ ימני על אחת השורות המסומנות
3. **תוצאה**: תפריט של שורות מרובות

---

## 10. בדיקת ביצועים

### מה לבדוק:
- גלילה חלקה עם בחירה

### איך לבדוק:
1. בחר מספר שורות
2. גלול מעלה ומטה
3. הבחירה צריכה להישאר
4. הגלילה צריכה להיות חלקה

### תוצאה מצופה:
✅ אין ריצודים
✅ הבחירה נשמרת בזמן גלילה
✅ ביצועים טובים גם עם הרבה שורות מסומנות

---

## סיכום רשימת בדיקות

- [ ] עיצוב LTR נכון
- [ ] בחירה בודדת עובדת
- [ ] בחירה מרובה עם Ctrl עובדת
- [ ] בחירה בגרירה עובדת
- [ ] תפריט שורה בודדת עובד
- [ ] תפריט שורות מרובות עובד
- [ ] העתקת הודעה עובדת
- [ ] העתקת שורה מלאה עובדת
- [ ] העתקת מספר שורות עובדת
- [ ] ביטול בחירה עובד
- [ ] אינדיקציות חזותיות נכונות
- [ ] שילובים מורכבים עובדים
- [ ] ביצועים טובים

---

## תיקונים שבוצעו

### ✅ תיקון 1: עיצוב LTR
- הוספת `CompositionLocalProvider(LocalLayoutDirection provides LayoutDirection.Ltr)`
- כל העמודות עכשיו מוצגות בסדר LTR נכון

### ✅ תיקון 2: גרירה לבחירת שורות
- שימוש ב-`PointerEventType.Enter` ו-`PointerEventType.Move`
- הגרירה מזוהה כאשר העכבר נכנס לשורה חדשה עם כפתור לחוץ
- הבחירה מתעדכנת בזמן אמת

### ✅ תיקון 3: מיקום תפריט ההקשר
- הסרת `offset` מותאם אישית
- שימוש ב-`DpOffset.Zero` כדי לתת ל-Compose לטפל במיקום
- התפריט עכשיו מופיע במיקום הנכון ליד העכבר

### ✅ תיקון 4: תפריט על שורות מסומנות
- בדיקה של `isSelected` לפני הצגת התפריט
- תפריט מרובה מוצג רק כשהשורה מסומנת
- תפריט בודד מוצג רק כשהשורה לא מסומנת

## בעיות ידועות ופתרונות

### בעיה: גרירה לא עובדת
**פתרון**: 
1. ודא שאתה מחזיק את כפתור העכבר השמאלי לחוץ
2. גרור את העכבר לאט יותר כדי לוודא שהוא עובר על השורות
3. אל תחזיק Ctrl בזמן גרירה

### בעיה: תפריט לא מופיע במיקום הנכון
**פתרון**: זה תוקן - התפריט עכשיו אמור להופיע במיקום הנכון

### בעיה: העתקה לא עובדת
**פתרון**: ודא שיש לך הרשאות clipboard במערכת

---

## הערות למפתחים

1. **הלוגיקה של הגרירה**:
   - `onSelectionStart` - מופעל בלחיצה ראשונית
   - `onDragOver` - מופעל כשהעכבר נכנס לשורה בזמן גרירה
   - `onDragEnd` - מופעל בשחרור העכבר

2. **הלוגיקה של התפריט**:
   - אם `isSelected == true` → תפריט מרובה
   - אם `isSelected == false` → תפריט בודד

3. **מצב הבחירה**:
   - `selectedIndices` - Set של אינדקסים מסומנים
   - `dragStartIndex` - אינדקס התחלת הגרירה
   - `isDragging` - האם כרגע בתהליך גרירה
